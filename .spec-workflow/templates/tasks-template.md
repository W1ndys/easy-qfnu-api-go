# 任务清单

## 模型层任务

- [ ] 1. 在 model/[feature].go 中定义数据结构
  - 文件: model/[feature].go
  - 定义请求参数结构体（带 JSON 标签和 binding 验证）
  - 定义响应数据结构体
  - 目的: 建立类型安全的数据模型
  - _复用: model/common.go 中的公共结构体_
  - _需求: 1.1_
  - _提示: 角色: Go 开发者 | 任务: 根据需求 1.1 创建请求和响应结构体，使用 JSON 标签和 binding 验证 | 约束: 遵循项目命名规范，字段使用 snake_case JSON 标签 | 成功标准: 结构体编译通过，字段注释完整_

## 服务层任务

- [ ] 2. 在 service/[feature].go 中实现业务逻辑
  - 文件: service/[feature].go
  - 实现 HTTP 请求获取教务系统页面
  - 使用 goquery 解析 HTML 提取数据
  - 定义哨兵错误类型
  - 目的: 封装核心业务逻辑和数据获取
  - _复用: common/request/request.go 中的请求工具_
  - _需求: 2.1, 2.2_
  - _提示: 角色: Go 后端开发者，熟悉 Resty 和 goquery | 任务: 根据需求 2.1 和 2.2 实现数据获取和解析逻辑 | 约束: 使用 Resty 发起请求，goquery 解析 HTML，定义明确的错误类型 | 成功标准: 能正确获取并解析教务系统数据，错误处理完善_

- [ ] 3. 添加辅助函数和数据转换
  - 文件: service/[feature].go（续）
  - 添加数据清洗和格式化函数
  - 实现容错处理（未知值透传）
  - 目的: 完善业务逻辑，提高健壮性
  - _复用: service/ 中的现有模式_
  - _需求: 2.3_
  - _提示: 角色: Go 开发者 | 任务: 根据需求 2.3 添加数据转换和容错逻辑 | 约束: 遵循容错优先原则，未知输入不报错 | 成功标准: 边界情况处理完善，代码健壮_

## 接口层任务

- [ ] 4. 在 api/v1/[feature].go 中实现 Handler
  - 文件: api/v1/[feature].go
  - 实现 HTTP 处理函数
  - 参数绑定和验证
  - 调用 Service 并构造响应
  - 精确捕获哨兵错误
  - 目的: 提供 RESTful API 接口
  - _复用: common/response/response.go 统一响应_
  - _需求: 3.1_
  - _提示: 角色: Go Web 开发者，熟悉 Gin 框架 | 任务: 根据需求 3.1 实现 API Handler | 约束: 使用 ShouldBindJSON 绑定参数，使用 errors.Is 捕获哨兵错误，使用统一响应封装 | 成功标准: API 可正常调用，错误响应规范_

- [ ] 5. 在 main.go 中注册路由
  - 文件: main.go
  - 在 API 路由组中注册新接口
  - 确保中间件正确应用
  - 目的: 将新接口集成到路由系统
  - _复用: 现有路由注册模式_
  - _需求: 3.2_
  - _提示: 角色: Go 开发者 | 任务: 在 main.go 中注册新路由 | 约束: 在正确的路由组中注册，确保鉴权中间件生效 | 成功标准: 路由可访问，中间件正常工作_

## 文档任务

- [ ] 6. 更新 API 文档
  - 文件: docs/API.md
  - 添加新接口的文档说明
  - 包含请求/响应示例
  - 目的: 保持文档与代码同步
  - _需求: 全部_
  - _提示: 角色: 技术文档编写者 | 任务: 在 API.md 中添加新接口文档 | 约束: 遵循现有文档格式，包含完整的请求响应示例 | 成功标准: 文档清晰完整，示例可用_

## 前端任务（如适用）

- [ ] 7. 创建前端页面
  - 文件: web/[feature].html
  - 实现页面 UI 和交互逻辑
  - 调用后端 API 获取数据
  - 目的: 提供用户界面
  - _复用: web/ 中现有页面的样式和模式_
  - _需求: 4.1_
  - _提示: 角色: 前端开发者 | 任务: 创建功能页面 | 约束: 使用与现有页面一致的样式，通过 Authorization Header 传递认证信息 | 成功标准: 页面功能完整，样式统一_

## 测试与验证

- [ ] 8. 功能测试
  - 使用 Postman/curl 测试 API
  - 验证正常流程和错误场景
  - 测试前端页面（如适用）
  - 目的: 确保功能正确性
  - _需求: 全部_
  - _提示: 角色: 测试人员 | 任务: 验证所有功能需求 | 约束: 覆盖正常和异常场景 | 成功标准: 所有验收标准通过_

- [ ] 9. 代码审查与清理
  - 检查代码风格一致性
  - 移除调试代码
  - 确保注释完整
  - 目的: 保持代码质量
  - _需求: 全部_
  - _提示: 角色: 代码审查者 | 任务: 审查代码质量 | 约束: 遵循项目代码规范 | 成功标准: 代码整洁，符合规范_
